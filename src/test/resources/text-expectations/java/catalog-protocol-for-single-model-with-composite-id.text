package io.vlingo.xoomapp.model.catalog;

import io.vlingo.xoom.actors.Definition;
import io.vlingo.xoom.common.Completes;
import io.vlingo.xoom.actors.Stage;
import io.vlingo.xoomapp.model.*;

public interface Catalog {

  /*
   * Returns my current state.
   *
   * @return {@code Completes<CatalogState>}
   */
  Completes<CatalogState> currentState();

  Completes<CatalogState> withName(final String authorId, final Name name);

  static Completes<CatalogState> withName(final Stage stage, final String authorId, final Name name) {
    final String prefix = String.format("g-authorId:%s", authorId);
    final io.vlingo.xoom.actors.Address _address = stage.addressFactory().uniquePrefixedWith(prefix);
    final Catalog _catalog = stage.actorFor(Catalog.class, Definition.has(CatalogEntity.class, Definition.parameters(_address.idString())), _address);
    return _catalog.withName(authorId, name);
  }
  Completes<CatalogState> update(final String id, final String authorId, final Name name);

}